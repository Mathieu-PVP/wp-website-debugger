function loadFontAwesome(){if(!Array.from(document.head.getElementsByTagName("link")).some((e=>e.href.includes("cdnjs.cloudflare.com/ajax/libs/font-awesome")))){const e=document.createElement("link");e.rel="stylesheet",e.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css",document.head.appendChild(e)}}function addToastStyles(){const e=document.createElement("style");e.innerHTML='\n        #dgjs-toast-container {\n            position: fixed;\n            top: 0px;\n            right: 0px;\n            z-index: 99999;\n            display: flex;\n            flex-direction: column-reverse;\n            align-items: flex-end;\n            gap: 20px;\n            max-height: 100vh;\n            overflow-y: auto;\n            background-color: #000000b5;\n            padding: 15px;\n        }\n        .dgjs-toasts {\n            display: flex;\n            flex-direction: column;\n            align-items: flex-end;\n            gap: 10px;\n            max-height: 100%;\n            overflow-y: auto;\n            scrollbar-gutter: stable;\n            padding-right: 10px;\n        }\n        .dgjs-toasts::-webkit-scrollbar {\n            width: 10px;\n        }\n        .dgjs-toasts::-webkit-scrollbar-track {\n            background-color: #343434;\n        }\n        .dgjs-toasts::-webkit-scrollbar-thumb {\n            background-color: #000000;\n            box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.3);\n        }\n        .dgjs-toast {\n            display: flex;\n            align-items: center;\n            padding: 15px 20px;\n            border-radius: 5px;\n            color: #fff;\n            font-size: 14px;\n            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);\n            animation: dgjs-fade-in 0.5s ease;\n            position: relative;\n            gap: 5px;\n            font-family: "Courier Prime", monospace;\n            max-width: 45vw;\n            word-wrap: break-word;\n        }\n        .dgjs-fade-out {\n            animation: dgjs-fade-out 0.5s ease forwards; \n        }\n        @keyframes dgjs-fade-in {\n            from { opacity: 0; transform: translateY(-20px); }\n            to { opacity: 1; transform: translateY(0); }\n        }\n        @keyframes dgjs-fade-out {\n            from { opacity: 1; transform: translateY(0); }\n            to { opacity: 0; transform: translateY(-20px); }\n        }\n        .dgjs-toast-icon {\n            margin-right: 10px;\n            font-size: 14px;\n            opacity: 0.5;\n        }\n        .dgjs-close-button {\n            background: transparent;\n            border: none;\n            color: #ffffff;\n            font-size: 12px;\n            cursor: pointer;\n            opacity: 0.5;\n            padding: 8px 1em;\n            border-radius: 4px;\n            transition: background-color 0.3s ease;\n        }\n        .dgjs-close-button:hover { background-color: #881644; }\n        .dgjs-toast.error { background-color: #e74c3c; }\n        .dgjs-toast.success { background-color: #2ecc71; }\n        .dgjs-toast.info { background-color: #3498db; }\n        .dgjs-toast.warning { background-color: #f39c12; }\n        #dgjs-toggle-button {\n            background-color: #000000;\n            color: white;\n            border: none;\n            padding: 10px 15px;\n            border-radius: 5px;\n            cursor: pointer;\n            z-index: 100000;\n            transition: background-color 0.3s ease;\n        }\n        #dgjs-toggle-button:hover {\n            background-color: #1D1D1D;\n        }\n    ',document.head.appendChild(e)}class Toast{static toastContainer;constructor(e,t,n=!1){this.type=e,this.message=t,this.temporary=n,Toast.toastContainer||Toast.createContainer(),this.renderToast()}static createContainer(){const e=document.createElement("div");e.id="dgjs-toast-container",Toast.toastContainer=document.createElement("div"),Toast.toastContainer.classList.add("dgjs-toasts"),e.appendChild(Toast.toastContainer),document.body.appendChild(e),this.createToggleButton()}static createToggleButton(){const e=document.createElement("button");e.id="dgjs-toggle-button",e.innerHTML='<i class="fa fa-eye-slash" aria-hidden="true"></i>';const t="true"===sessionStorage.getItem("dgjs-toasts-hidden"),n=document.querySelector(".dgjs-toasts");t&&(n.style.display="none",e.innerHTML='<i class="fa fa-eye" aria-hidden="true"></i>'),e.onclick=function(){const t=document.querySelector(".dgjs-toasts");"none"===t.style.display?(t.style.display="flex",e.innerHTML='<i class="fa fa-eye-slash" aria-hidden="true"></i>',sessionStorage.setItem("dgjs-toasts-hidden","false")):(t.style.display="none",e.innerHTML='<i class="fa fa-eye" aria-hidden="true"></i>',sessionStorage.setItem("dgjs-toasts-hidden","true"))};document.querySelector("#dgjs-toast-container").appendChild(e)}renderToast(){const e=document.createElement("div");e.classList.add("dgjs-toast",this.type),e.appendChild(this.createContent()),e.appendChild(this.createCloseButton()),Toast.toastContainer.appendChild(e),this.temporary&&setTimeout((()=>this.removeToast(e)),5e3)}createContent(){const e=document.createElement("div");e.classList.add("dgjs-toast-content"),e.appendChild(this.createIcon());const t=document.createElement("span");return t.textContent=this.message,e.appendChild(t),e}createIcon(){const e=document.createElement("i");return e.classList.add(...({error:"fa-solid fa-exclamation-circle",info:"fa-solid fa-info-circle",success:"fa-solid fa-check-circle",warning:"fa-solid fa-exclamation-triangle"}[this.type]||"fa-solid fa-bell").split(" ")),e.classList.add("dgjs-toast-icon"),e}createCloseButton(){const e=document.createElement("button");e.classList.add("dgjs-close-button");const t=document.createElement("i");return t.classList.add("fas","fa-times"),e.appendChild(t),e.onclick=()=>this.removeToast(e.closest(".dgjs-toast")),e}removeToast(e){e.classList.add("dgjs-fade-out"),setTimeout((()=>e.remove()),500)}}window.addEventListener("error",(e=>{const t=`${e.message} at ${e.filename}:${e.lineno}`;new Toast("error",t)})),window.addEventListener("unhandledrejection",(e=>{const t=`Unhandled promise rejection: ${e.reason}`;new Toast("error",t)}));const EventEmitter={events:{},on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)},emit(e,...t){this.events[e]?.forEach((e=>e(...t)))}},originalConsoleLog=console.log,originalConsoleWarn=console.warn;async function getImageSize(e){return new Promise((t=>{const n=new Image;n.src=e,n.onload=()=>t(Math.round(n.fileSize/1024||0))}))}function isValidURL(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z0-9][a-z0-9-]{0,61}[a-z0-9])\\.)+[a-z]{2,6}|localhost|\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}|\\[?[a-f0-9]*:[a-f0-9:]+\\]?)(\\:\\d+)?(\\/[-a-z0-9%_.~+]*)*(\\?[;&a-z0-9%_.~+=-]*)?(\\#[-a-z0-9_.~+=]*)?$","i").test(e)}async function checkSEOBestPractices(){const e=[],t=window.performance?.timing||{};t.loadEventEnd-t.navigationStart>3e3&&e.push({type:"warning",message:"Le temps de chargement de la page est supérieur à 3 secondes."});const n=[{url:"/robots.txt",message:"Aucun fichier robots.txt trouvé."},{url:"/sitemap.xml",message:"Aucun fichier sitemap.xml trouvé."}];for(const{url:t,message:a}of n)try{(await fetch(t)).ok||e.push({type:"warning",message:a})}catch{e.push({type:"warning",message:`Erreur lors de la vérification de ${t}.`})}[{selector:'meta[charset="UTF-8"]',error:'Aucune balise <meta> charset trouvée. Ajoutez <meta charset="UTF-8">.'},{selector:"title",error:"Aucune balise <title> trouvée."},{selector:'meta[name="description"]',error:"Aucune balise <meta> description trouvée."},{selector:'link[rel="canonical"]',warning:'Aucune balise <link rel="canonical"> trouvée.'},{selector:'meta[name="viewport"]',error:"Aucune balise <meta> viewport trouvée."},{selector:'meta[name="robots"]',warning:'Aucune balise <meta name="robots"> trouvée.'},{selector:'meta[name="author"]',warning:'Aucune balise <meta name="author"> trouvée.'},{selector:'meta[property="og:title"]',warning:'Aucune balise Open Graph <meta property="og:title"> trouvée.'},{selector:'meta[property="og:description"]',warning:'Aucune balise Open Graph <meta property="og:description"> trouvée.'},{selector:'meta[name="twitter:card"]',warning:"Aucune balise Twitter Card trouvée."},{selector:'script[type="application/ld+json"]',warning:"Aucune balise de données structurées trouvée (JSON-LD)."}].forEach((({selector:t,error:n,warning:a})=>{const s=document.querySelector(t);n&&!s?e.push({type:"error",message:n}):a&&!s?e.push({type:"warning",message:a}):a&&s&&("title"===t&&s.innerText.length>60&&e.push({type:"warning",message:"La balise <title> est trop longue. Elle devrait faire moins de 60 caractères."}),'meta[name="description"]'===t&&s.getAttribute("content").length>160&&e.push({type:"warning",message:"La balise <meta> description est trop longue. Elle devrait faire moins de 160 caractères."}))}));const a=[...document.querySelectorAll('link[rel="stylesheet"]')],s=[...document.querySelectorAll("script[src]")];a.length>0&&a.forEach((t=>{t.href.includes(".min.css")||e.push({type:"warning",message:`Le fichier CSS "${t.href}" n'est pas minifié.`})})),s.length>0&&s.forEach((t=>{t.src.includes(".min.js")||e.push({type:"warning",message:`Le fichier JavaScript "${t.src}" n'est pas minifié.`})}));const o=document.querySelectorAll("h1, h2, h3, h4, h5, h6");if(0===o.length)e.push({type:"error",message:"Aucune balise d'en-tête trouvée."});else{let t=1;for(let n=1;n<o.length;n++){const a=parseInt(o[n].tagName.charAt(1),10);if(a>t){e.push({type:"warning",message:"Les balises d'en-tête ne sont pas correctement imbriquées."});break}t=a}}document.querySelectorAll("img").forEach((async t=>{t.hasAttribute("alt")||e.push({type:"warning",message:`L'image "${t.src}" n'a pas d'attribut alt.`});const n=await getImageSize(t.src);n>200&&e.push({type:"warning",message:`L'image "${t.src}" est trop volumineuse (${n} Ko).`})}));document.querySelectorAll("a").forEach((t=>{const n=t.getAttribute("href");n&&n.startsWith("http")&&!isValidURL(n)&&!n.includes("/wp-admin")&&e.push({type:"warning",message:`Le lien "${n}" n'est pas valide.`})})),o.length>0&&"H1"!==o[0].tagName&&e.push({type:"warning",message:"La première balise d'en-tête doit être un <h1>."});const r=window.location.href;/^[a-z0-9-]+$/.test(r.split("/").pop())||e.push({type:"warning",message:"L'URL de la page n'est pas lisible."});document.querySelectorAll("input, textarea, select").forEach((t=>{const n=t.getAttribute("id"),a=document.querySelector(`label[for="${n}"]`);n&&!a&&e.push({type:"warning",message:`Le champ de formulaire "${t.name}" n'a pas de label associé.`})})),document.referrer&&!document.referrer.includes(window.location.hostname)&&e.push({type:"warning",message:"La page a été accédée via une redirection. Vérifiez les redirections mises en place."}),e.forEach((({type:e,message:t},n)=>{setTimeout((()=>{new Toast(e,t,!1)}),300*n)}))}console.log=function(...e){originalConsoleLog.apply(console,e),EventEmitter.emit("log",e.join(" "))},console.warn=function(...e){originalConsoleWarn.apply(console,e),EventEmitter.emit("warn",e.join(" "))},EventEmitter.on("log",(e=>new Toast("info","Nouveau log : "+e,!0))),EventEmitter.on("warn",(e=>new Toast("warning","Nouveau warning : "+e,!0))),wd_debug.is_debug&&window.addEventListener("DOMContentLoaded",(()=>{loadFontAwesome(),addToastStyles(),checkSEOBestPractices()}));